# 大犀牙管家

### 更新日志 v1.01.181124

> 发布时间：2018-11-26 15:32:00

1. [功能] 情报站里，可以切换星球，方便查看不同星球的刷牙记录
<br />

2. [算法] 调整覆盖率计算，每个牙齿分区要大于 10 次（0.5秒）才算覆盖到

3. [改进] 更新刷牙得分评语

4. [改进] 刷牙超过 2 分钟，不管蓝牙是否断开，均自动停止刷牙
> 固件相关

5. [改进] 由于目前固件发过来的刷牙总条数有时会错乱，所以不能用来计算刷牙总时长，改用本地计时器
> 固件相关

6. [改进] 目前固件发来的刷牙结果中的电量不准确，所以暂不启用此值
> 固件相关

7. [改进] 小程序本地缓存用户 WiFi 密码（在 WiFi 环境下配网成功过的密码），方便配对其他的牙刷

8. [改进] 第一次配网失败后，配网按钮文字变成“重试”

9. [改进] 如果在 WiFi 配网或准备刷牙时蓝牙中断，退回主界面时弹窗提醒

10. [改进] 长按 1.5 秒即可进入实时刷牙模式（之前是 3 秒，难度太大）
 
11. [改进] 分享图片评语支持多行显示

12. [改进] 更新生成分享图片的 Painter 库版本

13. [UI] 刷牙界面，第 19 颗牙齿应该在第 20 颗上面

14. [UI] 蓝牙设备列表底部添加留白

15. [动画] 用进度条呈现刷牙报告的生成进度（针对 Android 低端机优化）
> 目前牙刷端蓝牙传输速率是 20+ 条/秒，但 Android 低端机处理速度跟不上，导致用户点击牙刷按键或点击页面关闭按钮停止刷牙时，需要长时间等待去接收过程数据及结果数据，此时需要有进度反馈给用户

16. [动画] 使用进度条动画表示配网进度

17. [修复] Android 手机上背景图片还能被滚动的问题

18. [修复] 有时会读取不到固件版本等信息的问题

19. [修复] 有时会搜索出两个相同设备的问题

20. [修复] 多次弹出蓝牙连接成功的问题


> TODO：与马泷积分同步功能，小程序中的入口已添加，具体界面还在设计和开发中。

> 问题：iPhone X 上，牙刷蓝牙在 30 秒左右会断开，在某些情况下必现。

> 问题：牙刷端（固件）通过 WiFi 上报的结果数据与刷牙时长不符，会影响刷牙得分计算。

> 问题：牙刷端（固件）刷牙结果数据中的电量不准，偏低很多，会影响程序中显示的电量准确度。

> 问题：牙刷端（固件）如果没有连接上 WiFi，时钟不准（1970-01-01），会导致程序中看不到此次刷牙记录。

> （注：以上问题没有列出固件的全部问题）
